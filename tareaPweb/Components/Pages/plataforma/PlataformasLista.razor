@page "/plataformas"
@using tareaPweb.models
@inject NavigationManager NavigationManager
@rendermode InteractiveServer
<h3>Lista de Plataformas</h3>

<button class="btn btn-success mb-3" @onclick="AgregarPlataforma">Agregar Plataforma</button>

<table class="table table-striped">
    <thead>
        <tr>
            <th>Nombre</th>
            <th>Estado</th>
            <th>Acciones</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var plataforma in listaPlataformas)
        {
            <tr>
                <td>@plataforma.Nombre</td>
                <td>
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="estadoPlataforma" checked="@plataforma.Estado"
                            @onchange="() => ActivarDesactivarPlataforma(plataforma)">
                        <label class="form-check-label" for="estadoPlataforma">
                            @(plataforma.Estado ? "Activada" : "Desactivada")
                        </label>
                    </div>
                </td>

                <td>
                    <button class="btn btn-primary btn-sm" @onclick="() => EditarPlataforma(plataforma)">Editar</button>
                    <button class="btn btn-info btn-sm" @onclick="() => VerDetalles(plataforma)">Detalles</button>
                    <button class="btn btn-danger btn-sm" @onclick="() => EliminarPlataforma(plataforma)">Eliminar</button>
                </td>
            </tr>
        }
    </tbody>
</table>


@code {
    // Lista de plataformas (ejemplo de datos)
    private List<Plataforma> listaPlataformas = new List<Plataforma>
{
new Plataforma { Nombre = "PC", Estado = true },
new Plataforma { Nombre = "PS5", Estado = true },
new Plataforma { Nombre = "Xbox", Estado = false }
};

    private void AgregarPlataforma()
    {
        NavigationManager.NavigateTo("/plataforma-form");
    }

    private void ActivarDesactivarPlataforma(Plataforma plataforma)
    {
        plataforma.Estado = !plataforma.Estado;
    }

    private void EditarPlataforma(Plataforma plataforma)
    {
        // Navegar a la página de edición
        NavigationManager.NavigateTo($"/plataforma-form/{plataforma.Nombre}");
    }

    private void VerDetalles(Plataforma plataforma)
    {
        // Navegar a la página de detalles
        NavigationManager.NavigateTo($"/plataforma-detalles/{plataforma.Nombre}");
    }

    private void EliminarPlataforma(Plataforma plataforma)
    {
        listaPlataformas.Remove(plataforma);
    }
}
